(function(e){function t(t){for(var n,s,l=t[0],r=t[1],a=t[2],u=0,b=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,a||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,l=1;l<o.length;l++){var r=o[l];0!==c[r]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},c={app:0},i=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var d=r;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"004d":function(e,t,o){"use strict";o("d1f1")},"0d55":function(e,t,o){"use strict";o("6d2d")},1292:function(e,t,o){"use strict";o("9a5b")},"185a":function(e,t,o){},"1bf0":function(e,t,o){},"20ea":function(e,t,o){},2812:function(e,t,o){"use strict";o("20ea")},"38b9":function(e,t,o){},"4a16":function(e,t,o){"use strict";o("da3e")},"4e24":function(e,t,o){},5143:function(e,t,o){},5508:function(e,t,o){},5664:function(e,t,o){"use strict";o("df6b")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function c(e,t,o,c,i,s){var l=Object(n["t"])("tool-bar"),r=Object(n["t"])("uploader"),a=Object(n["t"])("control-balls"),d=Object(n["t"])("msgbar"),u=Object(n["t"])("note"),b=Object(n["t"])("fixed-components"),h=Object(n["t"])("anchors");return Object(n["o"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",{class:Object(n["m"])(["dark-filter",{darken:i.isDarkMode}])},null,2),Object(n["k"])(l,{isTouchMode:i.isTouchMode},null,8,["isTouchMode"]),Object(n["k"])(r),Object(n["k"])(a,{isDarkMode:i.isDarkMode,isTouchMode:i.isTouchMode,isFullscreen:i.isFullscreen,onToggleDarkMode:t[0]||(t[0]=function(e){return i.isDarkMode=!i.isDarkMode}),onToggleTouchMode:t[1]||(t[1]=function(e){return i.isTouchMode=!i.isTouchMode}),onToggleFullscreen:t[2]||(t[2]=function(e){return i.isFullscreen=!i.isFullscreen})},null,8,["isDarkMode","isTouchMode","isFullscreen"]),Object(n["k"])(d),Object(n["k"])(u,{isFullscreen:i.isFullscreen,isTouchMode:i.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(n["k"])(b),Object(n["k"])(h)],64)}o("caad");var i=function(e){return Object(n["q"])("data-v-f44d1a48"),e=e(),Object(n["p"])(),e},s={class:"toolbar shadow-3"},l=i((function(){return Object(n["h"])("i",{class:"logo material-icons shadow-2"},"format_list_bulleted",-1)})),r={class:"tools"},a=i((function(){return Object(n["h"])("i",{class:"material-icons"},"add",-1)})),d=[a],u=i((function(){return Object(n["h"])("i",{class:"material-icons"},"remove",-1)})),b=[u],h=i((function(){return Object(n["h"])("i",{class:"material-icons"},"indeterminate_check_box",-1)})),f=[h],p=i((function(){return Object(n["h"])("i",{class:"material-icons"},"color_lens",-1)})),j=[p],O=i((function(){return Object(n["h"])("i",{class:"material-icons"},"clear_all",-1)})),v=[O],m=i((function(){return Object(n["h"])("i",{class:"material-icons"},"cloud_upload",-1)})),g=[m],T=i((function(){return Object(n["h"])("i",{class:"material-icons"},"vertical_align_bottom",-1)})),y=[T],N={class:"material-icons file"},C=Object(n["j"])("input "),k={ref:"fileUploader",type:"file",accept:"application/json"};function w(e,t,o,c,i,a){return Object(n["o"])(),Object(n["g"])("div",s,[l,Object(n["h"])("div",r,[Object(n["h"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc||"td"==a.selectedNode.tagName}]),onClick:t[0]||(t[0]=function(){return a.openTextfield&&a.openTextfield.apply(a,arguments)})},d,2),Object(n["h"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc||"td"==a.selectedNode.tagName}]),onClick:t[1]||(t[1]=function(){return a.toDeleteNode&&a.toDeleteNode.apply(a,arguments)})},b,2),Object(n["y"])(Object(n["h"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[2]||(t[2]=function(){return a.nodeCancelSelect&&a.nodeCancelSelect.apply(a,arguments)})},f,2),[[n["w"],o.isTouchMode]]),Object(n["h"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!["basic-node","list-item"].includes(a.selectedNode.type)}]),onClick:t[3]||(t[3]=function(){return a.openColors&&a.openColors.apply(a,arguments)})},j,2),Object(n["h"])("div",{class:"tool btn btn-shallow",onClick:t[4]||(t[4]=function(){return a.clearNodes&&a.clearNodes.apply(a,arguments)})},v),Object(n["h"])("div",{class:"tool btn btn-shallow",onClick:t[5]||(t[5]=function(){return a.openUploader&&a.openUploader.apply(a,arguments)})},g),Object(n["h"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=function(){return a.saveNote&&a.saveNote.apply(a,arguments)})},y),Object(n["h"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=function(){return a.readNote&&a.readNote.apply(a,arguments)})},[Object(n["h"])("i",N,[C,Object(n["h"])("input",k,null,512)])])])])}o("e9c4");var L={inject:["note"],computed:{getThisObj:function(){var e;if(this.location)return this.getNodeObj({location:this.location,callback:function(t,o){e=t[o]}}),e}},methods:{getNodeObj:function(e){var t=e.parentObj,o=void 0===t?this.note:t,n=e.location,c=e.num,i=void 0===c?0:c,s=e.callback;i==n.length-1?s&&s(o.CTS,n[i]):this.getNodeObj({parentObj:o.CTS[n[i]],location:n,num:i+1,callback:s})}}};const x=L;var S=x,M=(o("a434"),{methods:{insertNode:function(e,t){e&&t&&this.getNodeObj({location:t,callback:function(t,o){t.splice(o+1,0,e)}})}}});const _=M;var D=_,F={methods:{deleteNode:function(e){var t;return this.selectedNode&&(this.selectedNode.loc=null,this.selectedNode.type=null),this.getNodeObj({location:e,callback:function(e,o){t=e[o],e.splice(o,1)}}),t}}};const A=F;var I=A,$=o("1344"),E=new $["a"],B=o("21a6"),U=o.n(B),H={props:["isTouchMode"],inject:["note","selectedNode"],mixins:[S,D,I],mounted:function(){var e=this,t=this.$refs.fileUploader;t.addEventListener("change",(function(){var o=new FileReader;o.readAsText(t.files[0],"uft8"),o.onload=function(t){var o=t.target.result;e.note.CTS=JSON.parse(o)}})),E.on("textfield-return-toolBar",(function(t){e.toInsertNode(t)}))},methods:{openTextfield:function(){E.emit("textfield-open","toolBar")},toInsertNode:function(e){var t=this.selectedNode.loc;this.insertNode(e,t),t[t.length-1]+=1,E.emit("add-history",{loc:t,prop:"IST"})},toDeleteNode:function(){var e=this.selectedNode.loc,t=this.deleteNode(e);t.SL=!1,e[e.length-1]-=1,E.emit("add-history",{loc:e,prop:"DEL",nodeObj:t})},nodeCancelSelect:function(){this.selectedNode.obj.SL=!1,this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null},openColors:function(){E.emit("fixedComponents-open","colors")},clearNodes:function(){this.note.CTS=[],this.note.HT=[],E.emit("clear-history")},openUploader:function(){E.emit("open-uploader")},saveNote:function(){var e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"}),t=this.note.NM||"MyNote";U()(e,t+".json")},readNote:function(){var e=this.$refs.fileUploader;e.click()}}},q=(o("fef1"),o("6b0d")),V=o.n(q);const G=V()(H,[["render",w],["__scopeId","data-v-f44d1a48"]]);var R=G,P=function(e){return Object(n["q"])("data-v-0c49e13a"),e=e(),Object(n["p"])(),e},J=P((function(){return Object(n["h"])("i",{class:"material-icons"},"add",-1)})),W=[J];function z(e,t,o,c,i,s){var l=Object(n["t"])("floor-block"),r=Object(n["t"])("node-renderer"),a=Object(n["t"])("textfield-group");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["note-outer shadow-4",{fullscreen:o.isFullscreen}])},[Object(n["h"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(n["z"])((function(){}),["prevent"]))},[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(s.note.CTS,(function(e,t){return Object(n["o"])(),Object(n["g"])(n["a"],{key:e.id},["floor"==e.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,selected:e.SL,children:e.CTS,level:2,location:[t]},null,8,["selected","children","location"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,nodeObj:e,index:t,level:1,location:[]},null,8,["nodeObj","index"]))],64)})),128)),Object(n["k"])(a,{id:"note-textfield-group",ref:"textfield",isAdding:i.isNodeAdding,onReturnNode:s.closeNodeAdder},null,8,["isAdding","onReturnNode"]),Object(n["h"])("div",{class:Object(n["m"])(["btn-fab adder-btn",{disabled:i.isNodeAdding}]),onClick:t[0]||(t[0]=function(){return s.openNodeAdder&&s.openNodeAdder.apply(s,arguments)}),href:"#note-textfield-group"},W,2)],544)],2)}o("99af");var K=Object(n["h"])("div",{class:"mask"},null,-1);function Q(e,t,o,c,i,s){var l=Object(n["t"])("floor-block",!0),r=Object(n["t"])("node-renderer"),a=Object(n["t"])("block-controls");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["floor shadow-1",{"shadow-3":o.selected,"touch-mode":s.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[K,(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["g"])(n["a"],{key:e.id},["floor"==e.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,children:e.CTS,selected:e.SL,level:o.level+1,location:o.location.concat([t])},null,8,["children","selected","level","location"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,nodeObj:e,index:t,level:o.level,location:o.location},null,8,["nodeObj","index","level","location"]))],64)})),128)),Object(n["k"])(a,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:o.selected,location:o.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}o("a15b");var X={data:function(){return{initialContent:this.content,editing:!1,dbTouch:!1}},inject:["selectedNode"],props:["tagName","content","location","selected","color"],mixins:[S],methods:{selectEvent:function(){this.selected?(E.emit("fixedComponents-close"),this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null,this.getThisObj.SL=!1):(this.selectedNode.loc&&(this.selectedNode.obj.SL=!1),this.selectedNode.loc=this.location,this.selectedNode.obj=this.getThisObj,this.selectedNode.type=this.tagName,this.getThisObj.SL=!0)}},render:function(){var e=this;return Object(n["l"])(this.tagName,{contentEditable:!0,class:{selected:this.selected,editing:this.editing},style:{color:this.color},onContextmenu:function(t){t.preventDefault(),e.selectEvent()},onTouchstart:function(){e.dbTouch&&e.selectEvent(),e.dbTouch=!0,setTimeout((function(){e.dbTouch=!1}),300)},onClick:function(t){e.initialContent=t.target.innerText,e.editing=!0},onBlur:function(t){var o=t.target.innerText;o!=e.initialContent&&(e.getThisObj.CT=o,E.emit("add-history",{loc:e.location,prop:"CT",before:e.initialContent,after:o}),e.initialContent=o),e.editing=!1}},this.content)}};const Y=X;var Z=Y,ee={props:["level","content","location","selected","color"],components:[Z],render:function(){var e;return e=this.level<6?"h"+this.level:"h5",Object(n["l"])(Z,{tagName:e,id:this.location.join(""),class:"heading",content:this.content,color:this.color,selected:this.selected,location:this.location})}};const te=ee;var oe=te,ne=function(e){return Object(n["q"])("data-v-4fafb773"),e=e(),Object(n["p"])(),e},ce=ne((function(){return Object(n["h"])("div",{class:"mask"},null,-1)})),ie=ne((function(){return Object(n["h"])("i",{class:"material-icons"},"playlist_add",-1)})),se=[ie],le={class:"material-icons"},re={class:"material-icons"};function ae(e,t,o,c,i,s){var l=Object(n["t"])("list-block",!0),r=Object(n["t"])("basic-node"),a=Object(n["t"])("list-child"),d=Object(n["t"])("block-controls");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["list",{"shadow-2":o.selected,hover:e.hover,empty:!o.children.length,"touch-mode":s.isTouchMode,nested:i.isNested}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[ce,Object(n["k"])(a,{ordered:o.isOrdered},{default:Object(n["x"])((function(){return[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.children,(function(t,c){return Object(n["o"])(),Object(n["g"])(n["a"],{key:t.id},["list"==t.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,isOrdered:t.OL,selected:t.SL,children:t.CTS,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","selected","children","location","onMouseInChild"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,tagName:"li",content:t.CT,color:t.CL,selected:t.SL,location:o.location.concat([c])},null,8,["content","color","selected","location"]))],64)})),128))]})),_:1},8,["ordered"]),Object(n["k"])(d,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:o.selected,location:o.location,parentType:"list"},{default:Object(n["x"])((function(){return[Object(n["h"])("div",{class:"btn btn-normal tool-btn",onClick:t[0]||(t[0]=function(){return s.addListBlock&&s.addListBlock.apply(s,arguments)})},se),Object(n["h"])("div",{class:"btn btn-normal tool-btn",onClick:t[1]||(t[1]=function(){return s.toggleOrdered&&s.toggleOrdered.apply(s,arguments)})},[Object(n["y"])(Object(n["h"])("i",le,"format_list_bulleted",512),[[n["w"],o.isOrdered]]),Object(n["y"])(Object(n["h"])("i",re,"format_list_numbered",512),[[n["w"],!o.isOrdered]])])]})),_:1},8,["disabled","isTouchMode","selected","location"])],34)}var de=function(e){return Object(n["q"])("data-v-83e6ac96"),e=e(),Object(n["p"])(),e},ue=de((function(){return Object(n["h"])("i",{class:"material-icons"},"add",-1)})),be=[ue],he={class:"checkbox"},fe=["checked"];function pe(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["controls",{disabled:o.disabled&&!o.isTouchMode,"touch-mode":o.isTouchMode}])},[Object(n["h"])("div",{class:"btn btn-normal tool-btn",onClick:t[0]||(t[0]=function(){return s.addNode&&s.addNode.apply(s,arguments)})},be),Object(n["s"])(e.$slots,"default",{},void 0,!0),Object(n["h"])("label",he,[Object(n["h"])("input",{type:"checkbox",ref:"checkbox",checked:o.selected,onChange:t[1]||(t[1]=function(){return s.selectEvent&&s.selectEvent.apply(s,arguments)})},null,40,fe),Object(n["h"])("i",{class:"checkbox-icon",onTouchstart:t[2]||(t[2]=function(){return s._touchstart&&s._touchstart.apply(s,arguments)}),onTouchend:t[3]||(t[3]=function(){return s._touchend&&s._touchend.apply(s,arguments)})},null,32)])],2)}var je={data:function(){return{timeout:null}},props:["isTouchMode","disabled","selected","location","parentType"],inject:["selectedNode"],mixins:[S],methods:{_touchstart:function(){var e=this;this.timeout=setTimeout((function(){e.addNode()}),1e3)},_touchend:function(){clearTimeout(this.timeout)},selectEvent:function(){var e=this.$refs.checkbox.checked;this.getThisObj.SL=e,e?(this.selectedNode.loc&&(this.selectedNode.obj.SL=!1),this.selectedNode.loc=this.location,this.selectedNode.obj=this.getThisObj,this.selectedNode.type=this.parentType,"list"==this.parentType&&(this.selectedNode.type=this.$parent.isNested?"nestedList":"notNestedList"),"table"==this.parentType&&E.emit("table-selected")):(this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null)},tableAdder:function(e){for(var t=e.length,o=e[0].length,n=[],c=0;c<o;c++)n.push("");e.push(n),E.emit("add-history",{loc:this.location,prop:"ROW",before:t,after:t+1})},detailAdder:function(e){e.push({CT:"",CL:"#333",SL:!1});var t=Object.create(this.location);t.push(e.length-1),E.emit("add-history",{loc:t,prop:"IST"})},listAdder:function(e){e.push({NT:"li",CT:"",CL:"#333",SL:!1});var t=Object.create(this.location);t.push(e.length-1),E.emit("add-history",{loc:t,prop:"IST"})},floorAdder:function(e){var t=this;E.off("textfield-return-"+this.parentType),E.on("textfield-return-"+this.parentType,(function(o){o&&e.push(o);var n=t.location;n.push(e.length-1),E.emit("add-history",{loc:n,prop:"IST"}),E.off("textfield-return-"+t.parentType)})),E.emit("textfield-open",this.parentType)},addNode:function(){var e=this.getThisObj.CTS;switch(this.parentType){case"table":this.tableAdder(e);break;case"details":this.detailAdder(e);break;case"list":this.listAdder(e);break;case"floor":this.floorAdder(e)}}}};o("e9f2"),o("b76b");const Oe=V()(je,[["render",pe],["__scopeId","data-v-83e6ac96"]]);var ve=Oe,me={data:function(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter:function(){var e=this;this.setTimeout=setTimeout((function(){e.hover=!0}),400)},onMouseLeave:function(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}};const ge=me;var Te=ge,ye={name:"list-block",data:function(){return{isNested:null}},components:{BasicNode:Z,BlockControls:ve,listChild:{props:["ordered"],render:function(){return Object(n["l"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location","selected"],inject:["isTouchMode"],mixins:[S,Te],methods:{addListBlock:function(){var e=this.getThisObj.CTS;e.push({NT:"list",OL:!1,SL:!1,CTS:[{NT:"li",CT:"",CL:"#333",SL:!1}]});var t=Object.create(this.location);t.push(e.length-1),E.emit("add-history",{loc:t,prop:"IST"})},toggleOrdered:function(){this.getThisObj.OL=!this.getThisObj.OL}},mounted:function(){var e=this.$el.parentNode;this.isNested="OL"==e.tagName||"UL"==e.tagName}};o("004d");const Ne=V()(ye,[["render",ae],["__scopeId","data-v-4fafb773"]]);var Ce=Ne,ke=function(e){return Object(n["q"])("data-v-e9f54980"),e=e(),Object(n["p"])(),e},we=ke((function(){return Object(n["h"])("div",{class:"mask"},null,-1)})),Le=ke((function(){return Object(n["h"])("i",{class:"material-icons"},"grid_on",-1)})),xe=[Le];function Se(e,t,o,c,i,s){var l=Object(n["t"])("table-row"),r=Object(n["t"])("block-controls");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["table shadow-1",{"shadow-3":o.selected,"touch-mode":s.isTouchMode,hover:e.hover&&!s.isTouchMode}]),onMouseenter:t[1]||(t[1]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[we,Object(n["h"])("table",null,[Object(n["h"])("tbody",null,[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["e"])(l,{key:e.id,children:e,location:o.location.concat(t)},null,8,["children","location"])})),128))])]),Object(n["k"])(r,{isTouchMode:s.isTouchMode,disabled:!e.hover,selected:o.selected,location:o.location,parentType:"table"},{default:Object(n["x"])((function(){return[Object(n["h"])("div",{class:Object(n["m"])(["btn btn-normal tool-btn",{disabled:!o.selected}]),onClick:t[0]||(t[0]=function(){return s.openTableSetter&&s.openTableSetter.apply(s,arguments)})},xe,2)]})),_:1},8,["isTouchMode","disabled","selected","location"])],34)}var Me=["onBlur"];function _e(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])("tr",null,[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.children,(function(e,o){return Object(n["o"])(),Object(n["g"])("td",{key:e.id,onClick:t[0]||(t[0]=function(){return s.edit&&s.edit.apply(s,arguments)}),onContextmenu:t[1]||(t[1]=function(){return s.edit&&s.edit.apply(s,arguments)}),onBlur:function(e){return s.finishEdit(e,o)},contenteditable:"true"},Object(n["u"])(e),41,Me)})),128))])}var De={mixins:[S],props:["children","location"],methods:{edit:function(e){var t=e.target;t.classList.add("editing")},finishEdit:function(e,t){var o=e.target;o.classList.remove("editing");var n=o.innerText;this.getThisObj[t]=n}}};const Fe=V()(De,[["render",_e]]);var Ae=Fe,Ie={props:["selected","children","location"],inject:["isTouchMode"],mixins:[Te],components:{TableRow:Ae,BlockControls:ve},methods:{openTableSetter:function(){E.emit("fixedComponents-open","tableSetter")}}};o("a067");const $e=V()(Ie,[["render",Se],["__scopeId","data-v-e9f54980"]]);var Ee=$e;function Be(e,t,o,c,i,s){var l=Object(n["t"])("basic-node"),r=Object(n["t"])("block-controls");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["details",{"shadow-2":o.selected,hover:e.hover,"touch-mode":s.isTouchMode}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Object(n["h"])("summary",{class:"summary",contenteditable:"true",ref:"summary",onBlur:t[0]||(t[0]=function(){return s.finishEdit&&s.finishEdit.apply(s,arguments)})},Object(n["u"])(o.summary),545),Object(n["h"])("details",null,[Object(n["h"])("summary",{onContextmenu:t[1]||(t[1]=function(t){return e.$refs.summary.focus()}),style:{"line-height":"1.4"}},null,32),(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["e"])(l,{key:e.id,tagName:"p",content:e.CT,color:e.CL,selected:e.SL,location:o.location.concat([t])},null,8,["content","color","selected","location"])})),128))]),Object(n["k"])(r,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:o.selected,location:o.location,parentType:"details"},null,8,["disabled","isTouchMode","selected","location"])],34)}var Ue={components:{BasicNode:Z,BlockControls:ve},mixins:[S,Te],inject:["isTouchMode"],props:["children","summary","location","selected"],methods:{finishEdit:function(e){var t=e.target,o=t.innerText;E.emit("add-history",{loc:this.location,prop:"SUM",before:this.getThisObj.SUM,after:o}),this.getThisObj.SUM=o}}};o("c329");const He=V()(Ue,[["render",Be],["__scopeId","data-v-35772b1c"]]);var qe=He,Ve={components:{Heading:oe,BasicNode:Z,ListBlock:Ce,TableBlock:Ee},props:["nodeObj","index","location","level"],render:function(){var e,t={location:this.location.concat([this.index]),selected:this.nodeObj.SL};switch(this.nodeObj.NT){case"h":e=oe,t.level=this.level,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL;break;case"list":e=Ce,t.isOrdered=this.nodeObj.OL,t.children=this.nodeObj.CTS;break;case"table":e=Ee,t.children=this.nodeObj.CTS;break;case"details":e=qe,t.summary=this.nodeObj.SUM,t.children=this.nodeObj.CTS;break;default:e=Z,t.tagName=this.nodeObj.NT,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL}return Object(n["l"])(e,t)}};const Ge=Ve;var Re=Ge,Pe={name:"floor-block",components:{BlockControls:ve,NodeRenderer:Re},props:["level","location","children","selected"],inject:["isTouchMode"],mixins:[Te]};const Je=V()(Pe,[["render",Q]]);var We=Je,ze={class:"selector",ref:"selector"},Ke=Object(n["i"])('<option value="h">标题</option><option value="p">段落</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="table">表格</option><option value="details">详情</option>',8),Qe=[Ke],Xe={class:"textfield",contenteditable:"true",ref:"inputter"},Ye=Object(n["h"])("i",{class:"material-icons"},"close",-1),Ze=[Ye];function et(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["textfield-group shadow-2",{disabled:!o.isAdding}])},[Object(n["h"])("select",ze,Qe,512),Object(n["h"])("div",Xe,null,512),Object(n["h"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(e){return s.closeNodeAdder()})},Ze)],2)}var tt=function(e,t){if(!t)return null;var o={NT:e,SL:!1};switch(e){case"h":case"p":case"li":o.CT=t,o.CL="#333";break;case"hr":break;case"floor":o.CTS=[{NT:"h",CT:t,CL:"#333",SL:!1}];break;case"ol":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333",SL:!1}],o.OL=!0;break;case"ul":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333",SL:!1}],o.OL=!1;break;case"table":o.CTS=[[t,"","",""],["","","",""]];break;case"details":o.SUM=t,o.CTS=[{CT:"",CL:"#333",SL:!1}];break}return o},ot={props:["isAdding"],inject:["note"],methods:{focus:function(){var e=this.$refs.inputter;e.focus()},closeNodeAdder:function(){var e=this.$refs.selector,t=this.$refs.inputter,o=e.value,n=t.innerText,c=tt(o,n);this.$emit("return-node",c),t.blur(),t.innerText=""}}};const nt=V()(ot,[["render",et]]);var ct=nt,it={components:{FloorBlock:We,NodeRenderer:Re,TextfieldGroup:ct},data:function(){return{isNodeAdding:!1}},props:["isFullscreen"],inject:["note"],created:function(){var e=this;addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"a"==n&&(t.preventDefault(),e.openNodeAdder())}))},methods:{openNodeAdder:function(){location.href="#note-textfield-group",this.isNodeAdding=!0,this.$refs.textfield.focus()},closeNodeAdder:function(e){this.isNodeAdding=!1;var t=this.note.CTS;e&&t.push(e);var o=[t.length-1];E.emit("add-history",{loc:o,prop:"IST"})}},watch:{isFullscreen:function(e,t){var o=this;e!=t&&(this.$refs.note.style.display="none",setTimeout((function(){o.$refs.note.style.display="block"}),1200))}}};o("b0a8");const st=V()(it,[["render",z],["__scopeId","data-v-0c49e13a"]]);var lt=st;function rt(e,t,o,c,i,s){var l=Object(n["t"])("anchors-view"),r=Object(n["t"])("drawer");return Object(n["o"])(),Object(n["g"])("div",null,[Object(n["k"])(r,{title:"笔记摘要",disabled:i.drawerDisabled,onCloseDrawer:t[0]||(t[0]=function(e){return i.drawerDisabled=!0})},{default:Object(n["x"])((function(){return[Object(n["k"])(l,{list:i.anchorList},null,8,["list"])]})),_:1},8,["disabled"])])}var at=o("b85c"),dt=(o("d81d"),{class:"titlebar shadow-4"}),ut={class:"closer circle"},bt={class:"drawer-view"};function ht(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",{class:Object(n["m"])(["fullscreen-mask",{disabled:o.disabled}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},null,2),Object(n["h"])("div",{class:Object(n["m"])(["drawer",{disabled:o.disabled}])},[Object(n["h"])("div",dt,[Object(n["h"])("div",ut,[Object(n["h"])("i",{class:"material-icons arrow-forward",onClick:t[1]||(t[1]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_forward"),Object(n["h"])("i",{class:"material-icons arrow-upward",onClick:t[2]||(t[2]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_upward")]),Object(n["h"])("h1",null,Object(n["u"])(o.title),1)]),Object(n["h"])("div",bt,[Object(n["s"])(e.$slots,"default")])],2)],64)}var ft={props:["title","disabled"],emits:["close-drawer"],methods:{close:function(){this.$emit("close-drawer")}}};o("2812");const pt=V()(ft,[["render",ht]]);var jt=pt,Ot={data:function(){return{drawerDisabled:!0,anchorList:[]}},components:{Drawer:jt,AnchorsView:{props:["list"],render:function(){var e=this.list.map((function(e){return Object(n["l"])("a",{level:e.level,href:"#"+e.target},e.content)}));return Object(n["l"])("div",e)}}},inject:["note"],methods:{getAnchors:function(){var e,t=document.querySelectorAll(".heading"),o=[],n=Object(at["a"])(t);try{for(n.s();!(e=n.n()).done;){var c=e.value;console.log(c),o.push({level:c.tagName,href:c.id,content:c.innerText})}}catch(i){n.e(i)}finally{n.f()}return o},close:function(){this.drawerDisabled=!0}},mounted:function(){var e=this;E.on("open-anchors",(function(){e.drawerDisabled=!1;var t=e.getAnchors();e.anchorList=t}))}};o("8faf");const vt=V()(Ot,[["render",rt],["__scopeId","data-v-4d805c12"]]);var mt=vt,gt=function(e){return Object(n["q"])("data-v-2979c2bd"),e=e(),Object(n["p"])(),e},Tt={class:"uploader shadow-16"},yt=gt((function(){return Object(n["h"])("i",{class:"material-icons"},"close",-1)})),Nt=[yt],Ct={class:"note-view-outer"},kt={class:"note-view"},wt={class:"input-group"},Lt={class:"buttons shadow-3"},xt=gt((function(){return Object(n["h"])("i",{class:"material-icons"},"cloud_upload",-1)})),St=[xt],Mt=gt((function(){return Object(n["h"])("i",{class:"material-icons"},"file_download",-1)})),_t=[Mt],Dt=gt((function(){return Object(n["h"])("i",{class:"material-icons"},"create_new_folder",-1)})),Ft=[Dt],At=gt((function(){return Object(n["h"])("i",{class:"material-icons"},"delete_forever",-1)})),It=[At];function $t(e,t,o,c,i,s){var l=Object(n["t"])("textfield-group"),r=Object(n["t"])("uploader-list");return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["uploader-outer fullscreen-mask",{disabled:i.disabled}])},[Object(n["h"])("div",Tt,[Object(n["h"])("div",{class:"closer shadow-1",onClick:t[0]||(t[0]=function(e){return i.disabled=!0})},Nt),Object(n["h"])("div",Ct,[Object(n["h"])("div",kt,[Object(n["k"])(r,{onFileSelect:s.select,list:i.noteList,ref:"uploaderList"},{default:Object(n["x"])((function(){return[Object(n["k"])(l,{onReturnNode:e.creatFolder,isAdding:i.addingFolder,ref:"textfieldGroup"},null,8,["onReturnNode","isAdding"])]})),_:1},8,["onFileSelect","list"])])]),Object(n["h"])("div",wt,[Object(n["y"])(Object(n["h"])("input",{class:"inputter",type:"text",placeholder:"笔记名",maxlength:"20","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.note.NM=e})},null,512),[[n["v"],s.note.NM]]),Object(n["y"])(Object(n["h"])("input",{class:"inputter",type:"password",placeholder:"密码",maxlength:"10","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e})},null,512),[[n["v"],i.password]])]),Object(n["h"])("div",Lt,[Object(n["h"])("div",{class:"btn btn-shallow",onClick:t[3]||(t[3]=function(){return e.upload&&e.upload.apply(e,arguments)})},St),Object(n["h"])("div",{class:"btn btn-shallow",onClick:t[4]||(t[4]=function(){return e.download&&e.download.apply(e,arguments)})},_t),Object(n["h"])("div",{class:"btn btn-shallow",onClick:t[5]||(t[5]=function(){return s.toCreatFolder&&s.toCreatFolder.apply(s,arguments)})},Ft),Object(n["h"])("div",{class:"btn btn-shallow",onClick:t[6]||(t[6]=function(){return e.deleteFile&&e.deleteFile.apply(e,arguments)})},It)])])],2)}var Et=o("53ca"),Bt=function(e){return Object(n["q"])("data-v-b8d05d56"),e=e(),Object(n["p"])(),e},Ut={key:0},Ht=Bt((function(){return Object(n["h"])("div",{class:"no-note"},"暂无笔记",-1)})),qt=[Ht],Vt={class:"note-list",ref:"noteList"},Gt={key:0},Rt=["data-location"],Pt={class:"item-content"},Jt={class:"folder"},Wt=["data-location"],zt=Bt((function(){return Object(n["h"])("i",{class:"item-avatar material-icons"},"assignment",-1)})),Kt={class:"item-content"},Qt=["data-location"],Xt=Bt((function(){return Object(n["h"])("i",{class:"item-avatar material-icons"},"assignment",-1)})),Yt={class:"item-content"};function Zt(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])(n["a"],null,[o.list.length?Object(n["f"])("",!0):(Object(n["o"])(),Object(n["g"])("div",Ut,qt)),Object(n["h"])("ul",Vt,[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.list,(function(e,o){return Object(n["o"])(),Object(n["g"])(n["a"],{key:e.id},["object"==Object(Et["a"])(e)?(Object(n["o"])(),Object(n["g"])("div",Gt,[Object(n["h"])("div",{class:"folder-name",onClick:t[1]||(t[1]=function(){return s.showToggle&&s.showToggle.apply(s,arguments)}),"data-location":o},[Object(n["h"])("i",{class:"item-avatar material-icons",onClick:t[0]||(t[0]=Object(n["z"])((function(){return s.select&&s.select.apply(s,arguments)}),["stop"]))},"folder_open"),Object(n["h"])("span",Pt,Object(n["u"])(e[0]),1)],8,Rt),Object(n["h"])("ul",Jt,[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(e[1],(function(e,c){return Object(n["o"])(),Object(n["g"])("li",{class:"folder-item",key:e.id,onClick:t[2]||(t[2]=function(){return s.select&&s.select.apply(s,arguments)}),"data-location":[o,c]},[zt,Object(n["h"])("span",Kt,Object(n["u"])(e),1)],8,Wt)})),128))])])):(Object(n["o"])(),Object(n["g"])("li",{key:1,"data-location":o,class:"list-item",onClick:t[3]||(t[3]=function(){return s.select&&s.select.apply(s,arguments)})},[Xt,Object(n["h"])("span",Yt,Object(n["u"])(e),1)],8,Qt))],64)})),128)),Object(n["s"])(e.$slots,"default",{},void 0,!0)],512)],64)}var eo={props:["list"],emits:["file-select"],data:function(){return{selected:{loc:"",type:""},lastSelectedNode:null}},methods:{showToggle:function(e){var t=e.target,o=t.nextSibling;o.style.maxHeight?o.style.maxHeight=null:o.style.maxHeight=o.scrollHeight+"px"},select:function(e){var t=e.target;"I"==t.tagName?(t=t.parentNode,this.selected.type="folder"):this.selected.type="file";var o=t.dataset["location"];this.selected.loc==o?(t.classList.remove("selected"),this.selected.loc="",this.selected.type="",this.lastSelectedNode=null,this.$emit("file-select",null)):(t.classList.add("selected"),this.lastSelectedNode&&this.lastSelectedNode.classList.remove("selected"),this.lastSelectedNode=t,this.selected.loc=o,this.$emit("file-select",this.selected))},selFolder:function(e){var t=this.$refs.noteList,o=t.children[e],n=o.querySelector("i");n.click()}}};o("79db");const to=V()(eo,[["render",Zt],["__scopeId","data-v-b8d05d56"]]);var oo=to,no=(o("ac1f"),o("1276"),o("bc3a")),co=o.n(no),io={methods:{getFileData:function(e){var t,o,n=this.noteList[e[0]];if(2==e.length){t="file";var c=n[1],i=n[0],s=c[e[1]];o="".concat(i,"/").concat(s)}else"string"==typeof n?(t="file",o=n):"object"==Object(Et["a"])(n)&&(t="folder",o=n[0]);return{type:t,name:o}}}};const so=io;var lo=so,ro={mixins:[lo],methods:{upload:function(){var e,t,o=this,n=this.note.NM;if(this.selected){e=this.selected.loc.split(",");var c=this.noteList[e[0]];if("object"==Object(Et["a"])(c)){var i=this.noteList[e[0]];t=i[0]}}co.a.post("/api/upload",{note:JSON.stringify(this.note),location:e,noteName:n,folderName:t,password:this.password}).then((function(e){e.data.code?E.emit("show-msg",e.data.msg):(e.data.isNew&&(o.noteList=e.data.noteList),E.emit("show-msg","笔记上传请求成功。"))})).catch((function(e){console.warn(e),E.emit("show-msg","笔记上传请求失败。")}))},download:function(){var e=this;if(this.selected){var t=this.selected.loc.split(","),o=this.getFileData(t),n=this.noteList[t[0]];1!=t.length||"object"!=Object(Et["a"])(n)?co.a.post("/api/download",{location:t,fileInfo:o,password:this.password}).then((function(o){if(o.data.code)5==o.data.code?(e.noteList=o.data.noteList,E.emit("show-msg",o.data.msg)):E.emit("show-msg",o.data.msg);else{E.emit("show-msg","笔记下载成功。");var n=confirm("将覆盖当前笔记，是否继续？");if(n){var c=o.data.noteContent,i=JSON.parse(c);e.note.NM=i.NM,e.note.CTS=i.CTS,document.title="".concat(i.NM," -- BNotee");var s=t[0];e.$refs.uploaderList.selFolder(s)}}})).catch((function(e){console.warn(e),E.emit("下载文件请求错误！")})):alert("不能下载文件夹。")}else alert("请选择文件！")},creatFolder:function(e){var t=this;if(this.addingFolder=!1,e){var o=e.CT;co.a.post("/api/create",{folderName:o,password:this.password}).then((function(e){e.data.code?E.emit("show-msg",e.data.msg):(E.emit("show-msg","文件夹创建成功。"),console.log(e.data.status),t.noteList=e.data.noteList)})).catch((function(e){console.warn(e),E.emit("创建文件夹请求错误。")}))}},deleteFile:function(){var e=this,t=confirm("此操作无法撤销，你确定吗？");if(t){var o=this.selected.loc.split(","),n=this.getFileData(o);co.a.post("/api/delete",{location:o,fileInfo:n,password:this.password}).then((function(t){t.data.code?5==t.data.code?(e.noteList=t.data.noteList,E.emit("show-msg",t.data.msg)):E.emit("show-msg",t.data.msg):(e.noteList=t.data.noteList,E.emit("show-msg","文件删除成功。"))})).catch((function(e){console.warn(e),E.emit("删除文件请求错误。")}))}}},mounted:function(){var e=this;E.on("open-uploader",(function(){if(e.disabled=!1,!e.noteList.length){var t=(new Date).getTime();co.a.get("/api/note-list?timestamp=".concat(t)).then((function(t){e.noteList=t.data.noteList}))}}))}};const ao=ro;var uo=ao,bo={components:{UploaderList:oo,TextfieldGroup:ct},mixins:[uo],inject:["note"],data:function(){return{disabled:!0,selected:null,addingFolder:!1,password:"",noteList:[]}},methods:{select:function(e){this.selected=e},toCreatFolder:function(){this.addingFolder=!0,this.$refs.textfieldGroup.focus()}}};o("e7cf");const ho=V()(bo,[["render",$t],["__scopeId","data-v-2979c2bd"]]);var fo=ho,po=function(e){return Object(n["q"])("data-v-c8fd90ac"),e=e(),Object(n["p"])(),e},jo=po((function(){return Object(n["h"])("div",{class:"block"},[Object(n["h"])("div",{class:"mask"}),Object(n["h"])("i",{class:"material-icons"},"apps")],-1)})),Oo=po((function(){return Object(n["h"])("i",{class:"material-icons"},"subtitles",-1)})),vo=[Oo],mo={class:"material-icons"},go={class:"material-icons"},To=po((function(){return Object(n["h"])("i",{class:"material-icons"},"touch_app",-1)})),yo=[To],No={class:"material-icons"},Co={class:"material-icons"};function ko(e,t,o,c,i,s){return Object(n["o"])(),Object(n["g"])("div",{class:Object(n["m"])(["controlballs",{fullscreen:o.isFullscreen}])},[jo,Object(n["h"])("div",{class:"ball btn",onClick:t[0]||(t[0]=function(){return s.openAnchors&&s.openAnchors.apply(s,arguments)})},vo),Object(n["h"])("div",{class:"ball btn",onClick:t[1]||(t[1]=function(t){return e.$emit("toggle-darkMode")})},[Object(n["y"])(Object(n["h"])("i",mo,"brightness_2",512),[[n["w"],!o.isDarkMode]]),Object(n["y"])(Object(n["h"])("i",go,"wb_sunny",512),[[n["w"],o.isDarkMode]])]),Object(n["h"])("div",{class:Object(n["m"])(["ball btn",{black:o.isTouchMode}]),onClick:t[2]||(t[2]=function(t){return e.$emit("toggle-touchMode")})},yo,2),Object(n["h"])("div",{class:"ball btn",onClick:t[3]||(t[3]=function(t){return e.$emit("toggle-fullscreen")})},[Object(n["y"])(Object(n["h"])("i",No,"fullscreen",512),[[n["w"],!o.isFullscreen]]),Object(n["y"])(Object(n["h"])("i",Co,"fullscreen_exit",512),[[n["w"],o.isFullscreen]])])],2)}var wo={props:["isDarkMode","isTouchMode","isFullscreen"],emits:["toggle-darkMode","toggle-touchMode","toggle-fullscreen"],methods:{openAnchors:function(){E.emit("open-anchors")}}};o("0d55");const Lo=V()(wo,[["render",ko],["__scopeId","data-v-c8fd90ac"]]);var xo=Lo;function So(e,t,o,c,i,s){var l=Object(n["t"])("textfield-group-fixed"),r=Object(n["t"])("colors"),a=Object(n["t"])("table-setter"),d=Object(n["t"])("history");return Object(n["o"])(),Object(n["g"])("div",null,[Object(n["k"])(l,{onClose:s.close,disabled:i.textfieldGroupDisabled},null,8,["onClose","disabled"]),Object(n["k"])(r,{onClose:s.close,disabled:i.colorsDisabled},null,8,["onClose","disabled"]),Object(n["k"])(a,{onClose:s.close,disabled:i.tableSetterDisabled},null,8,["onClose","disabled"]),Object(n["k"])(d,{disabled:i.historyDisabled},null,8,["disabled"])])}var Mo={class:"textfield-group fixed-component fixed"},_o={class:"selector",ref:"selector"},Do=Object(n["h"])("option",{value:"h"},"标题",-1),Fo=Object(n["h"])("option",{value:"p"},"段落",-1),Ao=Object(n["h"])("option",{value:"hr"},"割线",-1),Io=Object(n["h"])("option",{value:"floor"},"层次",-1),$o=Object(n["h"])("option",{value:"ol"},"序列",-1),Eo=Object(n["h"])("option",{value:"ul"},"乱列",-1),Bo=Object(n["h"])("option",{value:"table"},"表格",-1),Uo=Object(n["h"])("option",{value:"details"},"详情",-1),Ho=[Do,Fo,Ao,Io,$o,Eo,Bo,Uo],qo={class:"selector",ref:"selector4List"},Vo=Object(n["h"])("option",{value:"li"},"列项",-1),Go=Object(n["h"])("option",{value:"ol"},"序列",-1),Ro=Object(n["h"])("option",{value:"ul"},"乱列",-1),Po=[Vo,Go,Ro],Jo={class:"textfield",contenteditable:"true",ref:"inputter"},Wo=Object(n["h"])("i",{class:"material-icons"},"close",-1),zo=[Wo];function Ko(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["x"])((function(){return[Object(n["y"])(Object(n["h"])("div",Mo,[Object(n["y"])(Object(n["h"])("select",_o,Ho,512),[[n["w"],!s.isFromNestedList]]),Object(n["y"])(Object(n["h"])("select",qo,Po,512),[[n["w"],s.isFromNestedList]]),Object(n["h"])("div",Jo,null,512),Object(n["h"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(){return s.closeTextfield&&s.closeTextfield.apply(s,arguments)})},zo)],512),[[n["w"],!o.disabled]])]})),_:1})}var Qo={data:function(){return{commandFrom:""}},props:["disabled"],inject:["selectedNode"],computed:{isFromNestedList:function(){return"list"==this.commandFrom||["li","nestedList"].includes(this.selectedNode.type)}},mounted:function(){var e=this;E.on("textfield-open",(function(t){e.commandFrom=t,setTimeout((function(){e.$refs.inputter.focus()}),1200)}))},methods:{closeTextfield:function(){this.$emit("close","textfieldGroup");var e=this.isFromNestedList?this.$refs.selector4List.value:this.$refs.selector.value,t=this.$refs.inputter.innerText,o=tt(e,t);E.emit("textfield-return-"+this.commandFrom,o),this.$refs.inputter.blur(),this.$refs.inputter.innerText=""}}};const Xo=V()(Qo,[["render",Ko]]);var Yo=Xo,Zo=function(e){return Object(n["q"])("data-v-48369ae0"),e=e(),Object(n["p"])(),e},en={class:"colors fixed-component"},tn=["onClick"],on={class:"input-group"},nn=Zo((function(){return Object(n["h"])("i",{class:"material-icons"},"close",-1)})),cn=[nn];function sn(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["x"])((function(){return[Object(n["y"])(Object(n["h"])("div",en,[(Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(i.colors,(function(e){return Object(n["o"])(),Object(n["g"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(n["n"])({"background-color":e}),onClick:function(t){return s.setColor(e)}},null,12,tn)})),128)),Object(n["h"])("div",on,[Object(n["h"])("div",{class:"hint",onClick:t[0]||(t[0]=function(t){return e.$refs.colorInputter.click()})},"#"),Object(n["y"])(Object(n["h"])("input",{type:"color",ref:"colorInputter","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.colorValue=e})},null,512),[[n["w"],!1],[n["v"],i.colorValue]]),Object(n["y"])(Object(n["h"])("input",{class:"inputter",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.colorValue=e})},null,512),[[n["v"],i.colorValue]])]),Object(n["h"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","colors")})},cn)],512),[[n["w"],!o.disabled]])]})),_:1})}o("5319");var ln={data:function(){return{colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[S],methods:{setColor:function(e){var t=this.selectedNode.loc,o=this.selectedNode.obj,n=o.CL;o.CL=e,E.emit("add-history",{loc:t,prop:"CL",before:n,after:e})}},watch:{colorValue:function(e){var t=this;clearTimeout(this.timeout);var o=e.replace("#","");this.timeout=setTimeout((function(){t.setColor("#"+o)}),300)}}};o("c72e");const rn=V()(ln,[["render",sn],["__scopeId","data-v-48369ae0"]]);var an=rn,dn=function(e){return Object(n["q"])("data-v-2293c8da"),e=e(),Object(n["p"])(),e},un={class:"table-setter fixed-component"},bn={class:"input-group"},hn=dn((function(){return Object(n["h"])("i",{class:"hint material-icons"},"view_headline",-1)})),fn={class:"input-group"},pn=dn((function(){return Object(n["h"])("i",{class:"hint material-icons"},"view_column",-1)})),jn=dn((function(){return Object(n["h"])("i",{class:"material-icons"},"check",-1)})),On=[jn],vn=dn((function(){return Object(n["h"])("i",{class:"material-icons"},"close",-1)})),mn=[vn];function gn(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["x"])((function(){return[Object(n["y"])(Object(n["h"])("div",un,[Object(n["h"])("div",bn,[hn,Object(n["y"])(Object(n["h"])("input",{class:"inputter",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.row=e})},null,512),[[n["v"],i.row]])]),Object(n["h"])("div",fn,[pn,Object(n["y"])(Object(n["h"])("input",{class:"inputter",type:"text",placeholder:" > 0 ",maxlength:"3","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.col=e})},null,512),[[n["v"],i.col]])]),Object(n["h"])("div",{class:"closer",onClick:t[2]||(t[2]=function(){return s.tableSet&&s.tableSet.apply(s,arguments)})},On),Object(n["h"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","tableSetter")})},mn)],512),[[n["w"],!o.disabled]])]})),_:1})}var Tn={data:function(){return{row:1,col:1,targetNode:null,timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[S],mounted:function(){var e=this,t={ROW:"row",COL:"col"};E.on("table-selected",this.tableGet),E.on("table-edit",(function(o){var n=o.historyObj,c=o.resultValue;e.tableGet(n.loc);var i=t[n.prop];e[i]=n[c],e.tableSet(!1)}))},methods:{eventListen:function(e){var t=e.key;"Enter"==t&&this.tableSet(!0)},tableGet:function(e){var t=this;e?this.getNodeObj({location:e,callback:function(e,o){t.targetNode=e[o]}}):this.targetNode=this.selectedNode.obj,this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].length},tableSet:function(e){var t=this.targetNode.CTS.length,o=this.targetNode.CTS[0].length,n=Math.abs(this.row-t),c=Math.abs(this.col-o);if(this.col!=o)if(e&&E.emit("add-history",{loc:this.selectedNode.loc,prop:"COL",before:o,after:this.col}),this.col>o){var i,s=Object(at["a"])(this.targetNode.CTS);try{for(s.s();!(i=s.n()).done;)for(var l=i.value,r=0;r<c;r++)l.push("")}catch(O){s.e(O)}finally{s.f()}}else{var a,d=Object(at["a"])(this.targetNode.CTS);try{for(d.s();!(a=d.n()).done;)for(var u=a.value,b=0;b<c;b++)u.pop()}catch(O){d.e(O)}finally{d.f()}}if(this.row!=t)if(e&&E.emit("add-history",{loc:this.selectedNode.loc,prop:"ROW",before:t,after:this.row}),this.row>t){for(var h=[],f=0;f<this.col;f++)h.push("");for(var p=0;p<n;p++)this.targetNode.CTS.push([].concat(h))}else for(var j=0;j<n;j++)this.targetNode.CTS.pop()}},watch:{disabled:function(e){e?(this.targetNode=null,removeEventListener("keydown",this.eventListen)):(this.tableGet(),addEventListener("keydown",this.eventListen))},row:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.row=1}),1e3):clearTimeout(this.timeout)},col:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.col=1}),1e3):clearTimeout(this.timeout)}}};o("a99d");const yn=V()(Tn,[["render",gn],["__scopeId","data-v-2293c8da"]]);var Nn=yn,Cn=function(e){return Object(n["q"])("data-v-0e366d85"),e=e(),Object(n["p"])(),e},kn={class:"history fixed-component"},wn=Cn((function(){return Object(n["h"])("i",{class:"material-icons"},"undo",-1)})),Ln=[wn],xn=Cn((function(){return Object(n["h"])("i",{class:"material-icons"},"redo",-1)})),Sn=[xn],Mn=Cn((function(){return Object(n["h"])("i",{class:"material-icons"},"menu",-1)})),_n=[Mn];function Dn(e,t,o,c,i,s){var l=Object(n["t"])("history-view"),r=Object(n["t"])("drawer");return Object(n["o"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(n["b"],{name:"slide"},{default:Object(n["x"])((function(){return[Object(n["y"])(Object(n["h"])("div",kn,[Object(n["h"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:i.historyIndex==s.note.HT.length-1}]),onClick:t[0]||(t[0]=function(e){return s.doit("undo")})},Ln,2),Object(n["h"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:i.historyIndex<0}]),onClick:t[1]||(t[1]=function(e){return s.doit("redo")})},Sn,2),Object(n["h"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:!s.note.HT.length}]),onClick:t[2]||(t[2]=function(e){return i.drawerDisabled=!1})},_n,2)],512),[[n["w"],!o.disabled]])]})),_:1}),Object(n["k"])(r,{title:"编辑历史",disabled:i.drawerDisabled,onCloseDrawer:t[3]||(t[3]=function(e){return i.drawerDisabled=!0})},{default:Object(n["x"])((function(){return[Object(n["k"])(l,{list:s.note.HT},null,8,["list"])]})),_:1},8,["disabled"])],64)}var Fn=function(e){return Object(n["q"])("data-v-6a759db4"),e=e(),Object(n["p"])(),e},An=Fn((function(){return Object(n["h"])("span",{class:"history-prop"},"位置：",-1)})),In={class:"loc"},$n=Fn((function(){return Object(n["h"])("span",{class:"history-prop"},"属性：",-1)})),En={class:"prop"},Bn=Fn((function(){return Object(n["h"])("span",{class:"history-prop"},"改前：",-1)})),Un={class:"text"},Hn=Fn((function(){return Object(n["h"])("span",{class:"history-prop"},"改后：",-1)})),qn={class:"text"},Vn=["data-index"];function Gn(e,t,o,c,i,s){return Object(n["o"])(!0),Object(n["g"])(n["a"],null,Object(n["r"])(o.list,(function(e,o){return Object(n["o"])(),Object(n["g"])("div",{class:"history-block",key:e.id},[Object(n["h"])("div",null,[An,Object(n["h"])("span",In,Object(n["u"])(e.loc),1)]),Object(n["h"])("div",null,[$n,Object(n["h"])("span",En,Object(n["u"])(i.propsDict[e.prop]),1)]),Object(n["y"])(Object(n["h"])("div",null,[Bn,Object(n["h"])("span",Un,Object(n["u"])(e.before),1)],512),[[n["w"],e.before]]),Object(n["y"])(Object(n["h"])("div",null,[Hn,Object(n["h"])("span",qn,Object(n["u"])(e.after),1)],512),[[n["w"],e.after]]),Object(n["h"])("div",{class:"btn btn-shallow",onClick:t[0]||(t[0]=function(e){return s.doSome(e)})},[Object(n["h"])("i",{class:"material-icons","data-index":o},"check",8,Vn)])])})),128)}var Rn={props:["list"],data:function(){return{propsDict:{CT:"内容",CL:"颜色",SUM:"题目",ROW:"行数",COL:"列数",IST:"插入",DEL:"删除"}}},methods:{doSome:function(e){var t=e.target,o=t.dataset["index"],n=this.$parent.$parent;n.doSome(o)}}};o("cce6");const Pn=V()(Rn,[["render",Gn],["__scopeId","data-v-6a759db4"]]);var Jn=Pn,Wn={data:function(){return{drawerDisabled:!0,historyIndex:-1}},components:{Drawer:jt,HistoryView:Jn},props:["disabled"],inject:["note"],mixins:[S,D,I],methods:{doit:function(e){var t="undo"==e?++this.historyIndex:this.historyIndex--,o=this.note.HT[t],n="undo"==e?"before":"after";switch(o.prop){case"CT":case"CL":case"SUM":this.getNodeObj({location:o.loc,callback:function(e,t){var c=e[t];c[o.prop]=o[n]}});break;case"ROW":case"COL":E.emit("table-edit",{historyObj:o,resultValue:n});break;case"IST":var c=o.loc,i=this.deleteNode(c);this.note.HT.shift(),o.prop="DEL",o.loc[o.loc.length-1]-=1,o.nodeObj=i,this.note.HT.unshift(o);break;case"DEL":var s=o.nodeObj,l=o.loc;this.insertNode(s,l),this.note.HT.shift(),o.prop="IST",o.loc[o.loc.length-1]+=1,this.note.HT.unshift(o);break}},doSome:function(e){var t,o=e-this.historyIndex,n=Math.abs(o);if(o>0)t="undo";else{if(!(o<0))return;t="redo"}for(var c=0;c<n;c++)this.doit(t)}},mounted:function(){var e=this;addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"z"==n&&e.doit("undo")})),addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"y"==n&&e.doit("redo")})),E.on("add-history",(function(t){var o=e.note.HT;if(20==o.length&&o.pop(),e.historyIndex<0)o.unshift(t);else{var n=e.historyIndex+1;o.splice(0,n),o.unshift(t),e.historyIndex=-1}})),E.on("clear-history",(function(){e.historyIndex=-1}))}};o("5664");const zn=V()(Wn,[["render",Dn],["__scopeId","data-v-0e366d85"]]);var Kn=zn,Qn={data:function(){return{textfieldGroupDisabled:!0,colorsDisabled:!0,tableSetterDisabled:!0,historyDisabled:!1}},components:{TextfieldGroupFixed:Yo,Colors:an,TableSetter:Nn,History:Kn},methods:{open:function(e){this.closeAll(),this[e+"Disabled"]=!1},close:function(e){this[e+"Disabled"]=!0,this.historyDisabled=!1},closeAll:function(){this.colorsDisabled=!0,this.textfieldGroupDisabled=!0,this.tableSetterDisabled=!0,this.historyDisabled=!0}},mounted:function(){var e=this;E.on("fixedComponents-open",this.open),E.on("textfield-open",(function(){e.open("textfieldGroup")})),E.on("fixedComponents-close",(function(){e.closeAll(),e.historyDisabled=!1}))}};o("4a16");const Xn=V()(Qn,[["render",So],["__scopeId","data-v-ab5781fc"]]);var Yn=Xn,Zn={class:"msgbar-outer"};function ec(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["x"])((function(){return[Object(n["y"])(Object(n["h"])("div",Zn,[Object(n["h"])("div",{class:Object(n["m"])(["msgbar",{active:i.active}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},Object(n["u"])(i.msg),3)],512),[[n["w"],i.active]])]})),_:1})}var tc={data:function(){return{active:!1,msg:""}},methods:{close:function(){this.active=!1}},mounted:function(){var e=this;E.on("show-msg",(function(t){e.msg=t,e.active=!0}))},watch:{active:function(e){var t=this;e&&setTimeout((function(){t.close()}),3e3)}}};o("e8e8");const oc=V()(tc,[["render",ec]]);var nc=oc,cc={NM:"Example",HT:[],CTS:[{NT:"h",CT:"这是一个大标题",CL:"#333",SL:!1},{NT:"hr",SL:!1},{NT:"p",CT:"这是一个段落",CL:"#333",SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333",SL:!1},{NT:"p",CT:"这是一个段落",CL:"#333",SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333",SL:!1},{NT:"p",CT:"这是一个段落",CL:"#333",SL:!1}]}]},{NT:"list",OL:!0,SL:!1,CTS:[{NT:"li",CT:"这是一个列表项",CL:"#333",SL:!1},{NT:"li",CT:"这是一个列表项",CL:"#333",SL:!1},{NT:"list",OL:!1,SL:!1,CTS:[{NT:"li",CT:"嵌套列表内的列表项",CL:"#333",SL:!1},{NT:"li",CT:"嵌套列表内的列表项",CL:"#333",SL:!1}]}]},{NT:"table",SL:!1,CTS:[["表格项","表格项","表格项","表格项"],["表格项","表格项","表格项","表格项"]]},{NT:"details",SL:!1,SUM:"这是一个详情块",CTS:[{CT:"这是一个段落",CL:"#333",SL:!1},{CT:"这是一个段落",CL:"#333",SL:!1}]}]},ic={name:"App",components:{Anchors:mt,Note:lt,Uploader:fo,ControlBalls:xo,ToolBar:R,Msgbar:nc,FixedComponents:Yn},data:function(){return{note:cc,selectedNode:{loc:null,obj:null,type:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide:function(){var e=this;return{note:this.note,selectedNode:this.selectedNode,isTouchMode:Object(n["c"])((function(){return e.isTouchMode}))}},mounted:function(){(function(){var e=function(){var e=document.querySelector("#meta-viewport"),t=1080;window&&(t=window.innerHeight);var o="width=device-width,height=".concat(t,",initial-scale=1.0");e.setAttribute("content",o)};e(),addEventListener("orientationchange",(function(){e()}))})()}};o("1292");const sc=V()(ic,[["render",c]]);var lc=sc,rc=(o("5143"),o("8f09"),o("38b9"),o("afd3"),o("86be"),o("61fd"),o("8d2a"),o("cde1"),o("584d"),o("9483"));Object(rc["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ac=Object(n["d"])(lc);ac.config.unwrapInjectedRef=!0,ac.mount("#app")},"584d":function(e,t,o){},"61fd":function(e,t,o){},"6d2d":function(e,t,o){},"747c":function(e,t,o){},"79db":function(e,t,o){"use strict";o("4e24")},"7ea8":function(e,t,o){},"86be":function(e,t,o){},"8d2a":function(e,t,o){},"8f09":function(e,t,o){},"8faf":function(e,t,o){"use strict";o("7ea8")},9783:function(e,t,o){},"9a5b":function(e,t,o){},a067:function(e,t,o){"use strict";o("f205")},a55b:function(e,t,o){},a99d:function(e,t,o){"use strict";o("747c")},afd3:function(e,t,o){},b0a8:function(e,t,o){"use strict";o("e7e5")},b76b:function(e,t,o){"use strict";o("f001")},bfdc:function(e,t,o){},c329:function(e,t,o){"use strict";o("9783")},c72e:function(e,t,o){"use strict";o("cbe2")},cbe2:function(e,t,o){},cce6:function(e,t,o){"use strict";o("1bf0")},cde1:function(e,t,o){},d1f1:function(e,t,o){},da3e:function(e,t,o){},df6b:function(e,t,o){},e7cf:function(e,t,o){"use strict";o("185a")},e7e5:function(e,t,o){},e8e8:function(e,t,o){"use strict";o("a55b")},e9f2:function(e,t,o){"use strict";o("bfdc")},f001:function(e,t,o){},f205:function(e,t,o){},fef1:function(e,t,o){"use strict";o("5508")}});
//# sourceMappingURL=app.ed35a081.js.map